{"apiVersion":"tekton.dev/v1beta1","kind":"Pipeline","metadata":{"annotations":{"operator.tekton.dev/preserve-namespace":"true","pipeline.openshift.io/supported-versions":"[2.5,2.4,2.3]"},"labels":{"pipeline.openshift.io/runtime":"ruby","pipeline.openshift.io/type":"kubernetes"},"name":"s2i-ruby-deployment-pr","namespace":"openshift"},"spec":{"params":[{"name":"APP_NAME","type":"string"},{"default":".","name":"PATH_CONTEXT","type":"string"},{"default":"5","name":"MINOR_VERSION","type":"string"}],"resources":[{"name":"app-source","type":"git"},{"name":"app-image","type":"image"}],"tasks":[{"name":"build","params":[{"name":"TLSVERIFY","value":"false"},{"name":"PATH_CONTEXT","value":"$(params.PATH_CONTEXT)"},{"name":"MINOR_VERSION","value":"$(params.MINOR_VERSION)"}],"resources":{"inputs":[{"name":"source","resource":"app-source"}],"outputs":[{"name":"image","resource":"app-image"}]},"taskRef":{"kind":"ClusterTask","name":"s2i-ruby-pr"}},{"name":"deploy","params":[{"name":"SCRIPT","value":"kubectl $@"},{"name":"ARGS","value":["rollout","status","deploy/$(params.APP_NAME)"]}],"runAfter":["build"],"taskRef":{"kind":"ClusterTask","name":"openshift-client"}}]}}
